/* ==UserStyle==
@name         4ndr0tools - Transparently_wideGPT
@namespace    https://github.com/4ndr0666
@author       4ndr0666
@description  Wider and more transparent
@version      1.0.0
@license      CC0 1.0 Universal
@preprocessor less
==/UserStyle== */
@-moz-document domain("chatgpt.com") {

  :root {
    --header-height: 3rem;

	--background: url(https://raw.githubusercontent.com/4ndr0666/4ndr0site/refs/heads/main/static/images/Archwave4ndr0.png);	

    --selected-chat-gradient: linear-gradient( 135deg,
    #b8e5ff0f,
    #d9d9d9,
    #d9d9d9 100%);
    --selected-gpt-gradient: linear-gradient(135deg, #7cffde08, #ebebeb 100%);
    --main-surface-secondary: #d0d0cf;
    --surface-primary: 255, 255, 255;
    --bg-selection: #7ad28d;
    --text-color: 22, 22, 22;
    --text-gray-color: 100, 100, 100;
    --text-dark-color: 22, 22, 22;
    --text-color-selection: #191919;
    --surface-message-gpt: 210, 210, 210;
  }

  html.dark {
    /* Dark Theme */
    /* 
     * Dark background source: https://www.pexels.com/photo/green-pine-tree-leaves-192136/
     * Change the background HERE! (for dark theme)
     */
	--background: url(https://raw.githubusercontent.com/4ndr0666/4ndr0site/refs/heads/main/static/images/Archwave4ndr0.png);	
    /* --background: url(https://images.pexels.com/photos/192136/pexels-photo-192136.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1); */
    --selected-chat-gradient: linear-gradient( 135deg,
    #b8e5ff0f,
    #000,
    #000 100%);
    --selected-gpt-gradient: linear-gradient(135deg, #7cffde08, #000 100%);
    --main-surface-secondary: #131311;
    --surface-primary: 0, 0, 0;
    --bg-selection: #045e17;
    --text-color: 220, 220, 220;
    --text-gray-color: 180, 180, 180;
    --text-dark-color: 220, 223, 228;
    --text-color-selection: #fff;
    --surface-message-gpt: 0, 0, 0;
  }
  .dark :not(.light).popover,
  .dark.popover,
  .popover .dark {
    --main-surface-secondary: #131311;
  }

  /* Selection styles */
  ::-moz-selection {
    background: var(--bg-selection);
    color: var(--text-color-selection);
  }

  /* Body styles */
  body {
    color: rgb(var(--text-color));
    border-left: solid 3px #000 !important;
  }

  /* Dark mode text */
  .dark\:text-gray-500:is(.dark *) {
    color: rgb(var(--text-color) / var(--tw-text-opacity));
  }

  /* Chat background */
  body > div.relative > div.max-w-full:nth-child(2),
  body > div.flex:not(.relative) {
    background-image: var(--background);
    background-size: cover;
    background-position: center;
  }

  /* Header styles */
  div.draggable.no-draggable-children {
    padding: 0 0.75rem;
    height: var(--header-height);
    background-color: rgba(var(--surface-primary), 0.5);
    backdrop-filter: blur(1rem);
  }

  div.draggable.no-draggable-children button.group {
    background-color: transparent !important;
  }

  .bg-token-main-surface-primary {
    background-color: rgba(var(--surface-primary), 0.3) !important;
    backdrop-filter: blur(5px);
  }

  /* Main content container */
  div.flex.flex-col.text-sm.pb-9 {
    background: linear-gradient(135deg, #b9efff1c, #000);
    border-left: solid 0px #10a37f !important;
  }

  /* Sidebar */
  .bg-token-bg-elevated-secondary {
    background-color: var(--bg-elevated-secondary);
    background-color: transparent;
  }
  #sidebar-header {
    background-color: rgba(var(--surface-primary), .97);
    padding: 0 calc(var(--spacing) * 3);
    margin: 0 calc(var(--spacing) * -3);
  }
  /* History sticky headers (Today, Previous 7 Days, etc.. ) */
  #history .bg-token-bg-elevated-secondary {
    background-color: rgba(var(--surface-primary), .97);
    border-radius: 1rem;
  }

  .bg-token-sidebar-surface-primary {
    --sidebar-surface-primary: rgba(255, 255, 255, 0);
    --sidebar-surface-secondary: rgba(255, 255, 255, 0);
    background-color: rgba(255, 255, 255, .7);
    backdrop-filter: blur(.7rem);
    & .sticky.top-0.z-20 {
      background-color: rgba(255, 255, 255, 1);
      border-radius: 0 0 .5rem .5rem;
    }
    & .sticky.bottom-0.z-30 {
      background-color: transparent;
      height: 4rem * 1;
      padding-block: calc(var(--spacing)*2 * 0);
      overflow: hidden;
    }
  }
  .dark .bg-token-sidebar-surface-primary {
    --sidebar-surface-primary: rgba(255, 255, 255, 0);
    --sidebar-surface-secondary: rgba(255, 255, 255, 0);
    background-color: rgba(0, 0, 0, .7);
    & .sticky.top-0.z-20 {
      background-color: rgba(0, 0, 0, .9);
    }
  }
  :root {
    /* Selected item */
    --item-background-color: rgba(127, 127, 127, .1) !important;
  }

  /* Table container */
  .tableContainer {
    min-width: 100%;
    width: 100%;
    padding: 0;
  }
  ._tableContainer_16hzy_1 {
    width: 100%;
    margin: auto;
  }

  /* Table and button styles */
  #headlessui-portal-root .btn-danger,
  .dark .markdown th,
  div > .hover\:bg-gray-500\/10 {
    background-color: #3f3f3f;
  }
  body .dark ._tableWrapper_16hzy_14 table th {
    background-color: transparent;
  }
  ._tableWrapper_16hzy_14 {
    margin: auto;
    width: 100%;

    & table [data-col-size="sm"] {
      max-width: calc(var(--thread-content-max-width)*(6/24));
    }
    & table [data-col-size="md"] {
      max-width: calc(var(--thread-content-max-width)*(8/24));
    }

    & table {
      padding: 0rem .25rem;
      margin: auto;
      width: 100%;
      display: table;
      table-layout: fixed;
      & th {
        background-color: transparent;
      }
    }
  }

  /* Markdown specific styles */
  .markdown .bg-gray-800 span,
  .markdown th {
    font-size: 16px;
  }

  .markdown th {
    text-shadow: 0 .05rem .15rem #383838cc;
  }
  .markdown h1,
  .dark .markdown th {
    text-shadow: 0 2px 2px #000000e0;
  }

  .markdown .bg-black {
    background-color: #0c0d09;
  }

  .markdown .bg-gray-800 {
    background-color: #2c041d;
  }

  .markdown hr {
    border-color: #a66212;
  }

  .markdown h1 {
    color: #fff !important;
    font-size: 1.8em !important;
  }

  /* Text and color styles */
  .dark .dark\:text-gray-100,
  a {
    color: rgb(var(--text-dark-color));
  }

  button.group {
    background: var(--main-surface-secondary);
  }

  main button {
    border-color: #9d9d9d29 !important;
    border-radius: 99999rem;
  }

  .dark {
    & .btn-secondary {
      background: var(--main-surface-secondary);
    }

    & main button,
    & main li.group {
      border-color: #9d9d9d29 !important;
    }
  }

  main button:focus {
    /*     border-color: #fd971f !important; */
  }

  /* Input/Output containers */
  .input-container,
  .output-container {
    border: 1px solid #75715e;
    background-color: #272822;
  }

  /* Message colors */
  #headlessui-portal-root .grow.justify-center .text-gray-500,
  .user-input {
    color: #fd971f;
  }

  #headlessui-portal-root .grow.justify-center svg.text-green-700,
  .assistant-output,
  textarea + button.text-gray-500 {
    color: #a6e22e;
  }

  .timestamp {
    color: #75715e;
  }

  /* Button styles */
  .send-button {
    background-color: #f92672;
    color: #f8f8f2;
  }

  .send-button:hover {
    background-color: #ffb86c;
  }

  /* SVG styles */
  svg[viewBox="0 0 41 41"] {
    filter: invert(100%);
    -webkit-filter: invert(100%);
  }

  .relative.rounded-sm {
    border-radius: 0.25rem;
    -webkit-border-radius: 0.25rem;
    -moz-border-radius: 100%;
    background-color: #75ac9d !important;
  }

  /* Background styles */
  .bg-gray-900.md\:fixed,
  .dark .dark\:bg-gray-900,
  .scrollbar-trigger,
  .scrollbar-trigger a.bg-gray-900 {
    background-color: black;
  }

  /* Heading effects */
  h1 {
    filter: drop-shadow(0px 0px 0.25rem rgb(var(--surface-primary))) drop-shadow(0px 0px 5rem rgb(var(--surface-primary)));
  }

  /* Conversation turns */
  div[data-testid^="conversation-turn-"]:nth-child(even) {
    font-size: 0.9rem !important;
    box-shadow: 0 0 5px #000000f0;
    border-left: 3px solid;
    border-image: linear-gradient(to right, #51515199 100%, #51515138 10%) 1 100%;
    margin-bottom: 2px;
  }

  div[data-testid^="conversation-turn-"]:nth-child(odd) {
    font-size: 0.9rem !important;
    border-left: 3px solid;
    border-image: linear-gradient(to right, #10a37fa1 100%, #10a37f70 10%) 1 100%;
    margin-bottom: 2px;
  }

  /* User messages */
  div[data-message-author-role="user"] > div .bg-token-message-surface {
    background: rgba(255, 255, 255, 0.75);
    color: black;
    backdrop-filter: blur(2rem);
  }

  /* Assistant messages */
  div[data-message-author-role="assistant"] {
    backdrop-filter: blur(2rem);
    background: rgba(var(--surface-message-gpt), 0.5);
    border-radius: 1.4rem;
    padding: 0.25rem 1rem;
  }

  /* Text styles */
  .m-auto {
    font-size: 0.9rem !important;
    color: #cfc7c7 !important;
  }

  .text-base {
    font-size: 1rem !important;
    color: rgb(var(--text-gray-color)) !important;
  }

  .break-words {
    font-size: 1rem !important;
  }

  .prose pre {
    font-size: 0.775em !important;
    color: #bab3b3;
  }

  /* Layout adjustments */
  div.md\:pb-9 {
    padding-bottom: 1rem;
  }

  /* Input bar */
  div[role="presentation"] > div:nth-child(2) {
    padding-bottom: 0.5rem;
  }
  .bg-token-main-surface-secondary,
  .bg-token-bg-primary {
    /*background-color: #ffffffd1;*/
    /* TODO: search uses of this in light theme */
    backdrop-filter: blur(1rem);
  }
  .dark\:bg-token-main-surface-secondary:is(.dark *),
  .dark\:bg-\[\#303030\]:is(.dark *),
  {
    background-color: #07070787;
    backdrop-filter: blur(1rem);
  }

  /* Gradient background */
  .bg-gradient-to-l {
    background-image: linear-gradient( to left,
    #1e1e1e00 0,
    rgba(37, 38, 32, 0) 100%);
  }

  /* Delete dialog */
  div.absolute.inset-0 {
    & div.inset-0.fixed.dark\:bg-black\/80 {
      background-color: rgba(0, 0, 0, 0.5);

      div.popover.start-1\/2 {
        background-color: rgba(var(--surface-primary), 0.7);
      }
    }
  }

  .relative.ms-1.grow {
    & > .bg-linear-to-l {
      background-image: none;
    }
    .dark & + button {
      color: rgb(82, 82, 82) !important;
    }
  }

  /* Hidden elements */
  .relative.flex.min-h-8.w-full.items-center.justify-center.p-2.text-center.text-xs.text-token-text-secondary.md\:px-\[60px\] {
    visibility: hidden;
  }

  .fflex-col.gap-2 {
    background: linear-gradient(to right, #00000014, #000, #000, transparent);
  }

  .gizmo-shadow-stroke {
    color: #b0b0b0;
  }

  /* Full width chat */
  .\@\[64rem\]\:\[--thread-content-max-width\:48rem\] {
    --thread-content-max-width: min(calc(100% - 1.25rem), 135rem);
  }


  /* Media queries */
  @media (min-width: 768px) {
    .md\:pb-\[8vh\] {
      position: relative;
      z-index: -5;
    }

    .md\:max-w-3xl {
      max-width: 90%;
    }

    .md\:right-2 {
      right: 1.2rem;
    }

    .dark .dark\:md\:bg-vert-dark-gradient {
      background-image: inherit;
    }
  }

  @media only screen and (max-width: 768px) {
    .sticky.top-0 {
      background-color: #121310;
      border-color: #a66212;
    }

    .sticky.top-0 h1 {
      color: #fff !important;
    }

    .sticky.top-0 h1 + button {
      color: #a6e22e !important;
    }

    #headlessui-portal-root .bg-gray-600 {
      background-color: rgba(var(--surface-primary), 0.9) !important;
    }

    .dark .dark\:border-white\/20 {
      border-color: #262721;
    }
  }

  @media (min-width: 1200px) {
    .xl\:max-w-3xl {
      max-width: 90%;
    }
  }

  @media (min-width: 1280px) {
    .gizmo .gizmo\:xl\:max-w-\[48rem\] {
      max-width: 90%;
    }
  }

  @media (min-width: 1400px) {
    .xl\:max-w-3xl {
      max-width: 90%;
    }
  }

  @media (min-width: 1500px) {
    .xl\:max-w-3xl {
      max-width: 90%;
    }
  }

  @media (min-width: 1800px) {
    .xl\:max-w-3xl {
      max-width: 90%;
    }
  }
}
